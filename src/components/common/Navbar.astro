---
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<nav
    class="sticky top-0 z-50 backdrop-blur bg-[var(--color-surface)]/70 dark:bg-[var(--color-surface)]/70 shadow px-40 py-5 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 sm:gap-0"
>
    <!-- Enlaces de navegaciÃ³n -->
    <div
        class="flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-6 text-sm sm:text-base xl:text-lg"
    >
        <a
            href="#projects"
            class="hover:theme-hover theme-text font-medium"
            aria-current="page"
        >
            {t("nav.projects")}
        </a>
        <a href="#about" class="hover:theme-hover theme-text font-medium">
            {t("nav.about")}
        </a>
        <a href="#challenges" class="hover:theme-hover theme-text font-medium">
            {t("nav.challenges")}
        </a>
    </div>

    <!-- Selector de tema e idioma -->
    <div class="flex items-center space-x-3 text-sm sm:text-base">
        <button
            id="theme-toggle"
            class="bg-[var(--color-surface)] theme-text px-3 py-1.5 rounded-md hover:bg-[var(--color-hover)] transition"
            aria-label="Toggle theme"
        >
            ðŸŒ“
        </button>

        <select
            onchange="location.href = this.value"
            class="bg-[var(--color-surface)] theme-text px-3 py-1.5 rounded-md hover:bg-[var(--color-hover)] transition cursor-pointer"
            aria-label="Select language"
        >
            <option value="/es/" selected={lang === "es"}>ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
            <option value="/en/" selected={lang === "en"}>ðŸ‡¬ðŸ‡§ English</option>
        </select>
    </div>
</nav>

<script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
        const toggleBtn = document.getElementById("theme-toggle");
        toggleBtn?.addEventListener("click", async () => {
            const mod = await import("/src/scripts/theme.ts");
            mod.toggleTheme();
        });
    });
</script>
